{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Searchbar/Searchbar.js","Components/Button/Button.js","Components/Service/Service.js","Components/Loader/Loader.js","Components/Modal/Modal.js","App.js","index.js"],"names":["ImageGalleryItem","url","alt","onModalToggle","className","src","width","onClick","ImageGallery","this","props","images","map","id","webformatURL","tag","Component","Searchbar","state","query","changeHandler","event","setState","currentTarget","value","submitHandler","preventDefault","onSubmit","type","autoComplete","autoFocus","placeholder","onChange","Button","fetchImages","a","searchQuery","currentPage","axios","get","then","data","hits","Spinner","color","height","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","handleOverlayClick","e","target","window","addEventListener","removeEventListener","back","forward","modalImage","largeImageURL","tags","createPortal","App","error","isLoading","modal","modalIndex","search","find","image","prevState","indexOf","onFetchImages","scrollTo","top","documentElement","scrollHeight","behavior","onChangeQuery","options","pixabayApi","catch","finally","modalImageBackHandler","modalImageForwardHandler","length","prevProps","shouldRenderButtonLoadMore","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0bf44839.chunk.js","sourcesContent":["import React from 'react';\n\nconst ImageGalleryItem = ({ url, alt, onModalToggle }) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={url}\n        width=\"640\"\n        alt={alt}\n        className=\"ImageGalleryItem-image\"\n        onClick={onModalToggle}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nclass ImageGallery extends Component {\n  render() {\n    const { images, onModalToggle } = this.props;\n    return (\n      <ul className=\"ImageGallery\">\n        {images.map(({ id, webformatURL, tag }) => (\n          <ImageGalleryItem\n            key={id}\n            url={webformatURL}\n            alt={tag}\n            onModalToggle={() => onModalToggle(id)}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  changeHandler = event => {\n    this.setState({\n      query: event.currentTarget.value,\n    });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.query);\n\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    const { query } = this.state;\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.changeHandler}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\n\nconst Button = ({ fetchImages }) => {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={fetchImages}>\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n","import axios from 'axios';\n\nasync function fetchImages({ searchQuery = '', currentPage = 1 }) {\n  const apiKey = '20410166-62a7784bd988192fa85965390';\n  const url = `https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n  return await axios.get(url).then(({ data }) => data.hits);\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { fetchImages };\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Spinner = () => {\n  return (\n    <Loader\n      className=\"Loader\"\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={60}\n      width={60}\n    />\n  );\n};\n\nexport default Spinner;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.toggleModal();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.target !== e.currentTarget) {\n      return;\n    } else this.props.toggleModal();\n  };\n\n  render() {\n    const { back, forward } = this.props;\n    const { largeImageURL, tags } = this.props.modalImage;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          <button\n            type=\"button\"\n            className=\"ModalButtonBack\"\n            onClick={() => back()}\n          >\n            {'<'}\n          </button>\n          <img src={largeImageURL} alt={tags} />\n          <button\n            type=\"button\"\n            className=\"ModalButtonForward\"\n            onClick={() => forward()}\n          >\n            {'>'}\n          </button>\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport './App.css';\nimport ImageGallery from './Components/ImageGallery';\nimport Searchbar from './Components/Searchbar';\nimport Button from './Components/Button';\nimport pixabayApi from './Components/Service';\nimport Loader from './Components/Loader';\nimport Modal from './Components/Modal';\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    error: null,\n    isLoading: false,\n    modal: false,\n    modalIndex: '',\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n    if (prevState.images.length > 12) {\n      this.onFetchImages();\n    }\n  }\n\n  toggleModal = id => {\n    const { images } = this.state;\n    const search = images.find(image => image.id === id);\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      modalIndex: images.indexOf(search),\n    }));\n  };\n\n  onFetchImages = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      images: [],\n      modalIndex: '',\n      currentPage: 1,\n      error: null,\n    });\n  };\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { currentPage, searchQuery };\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchImages(options)\n      .then(hits => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  modalImageBackHandler = () => {\n    if (this.state.modalIndex === 0) {\n      this.toggleModal();\n    }\n    this.setState(prevState => ({\n      modalIndex: prevState.modalIndex - 1,\n    }));\n  };\n\n  modalImageForwardHandler = () => {\n    this.setState(prevState => ({\n      modalIndex: prevState.modalIndex + 1,\n    }));\n    const { images, modalIndex } = this.state;\n    if (images.length !== 0 && modalIndex >= images.length - 2) {\n      this.fetchImages();\n    }\n  };\n\n  render() {\n    const { error, modal, modalIndex, images, isLoading } = this.state;\n    const shouldRenderButtonLoadMore = images.length > 0 && !isLoading;\n    return (\n      <div>\n        <Searchbar onSubmit={this.onChangeQuery} />\n        {error && <p>Ooops! Something went wrong. Try again</p>}\n        <ImageGallery images={images} onModalToggle={this.toggleModal} />\n        {isLoading && <Loader />}\n        {shouldRenderButtonLoadMore && (\n          <Button fetchImages={this.fetchImages} />\n        )}\n        {modal && (\n          <Modal\n            toggleModal={this.toggleModal}\n            modalImage={images[modalIndex]}\n            back={this.modalImageBackHandler}\n            forward={this.modalImageForwardHandler}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}