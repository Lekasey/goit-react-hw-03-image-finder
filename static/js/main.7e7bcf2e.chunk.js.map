{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Searchbar/Searchbar.js","Components/Button/Button.js","Components/Service/Service.js","Components/Loader/Loader.js","Components/Modal/Modal.js","App.js","index.js"],"names":["ImageGalleryItem","url","alt","onModalToggle","className","src","width","onClick","ImageGallery","this","props","images","map","id","webformatURL","tag","Component","Searchbar","state","query","changeHandler","event","setState","currentTarget","value","submitHandler","preventDefault","onSubmit","type","autoComplete","autoFocus","placeholder","onChange","Button","fetchImages","a","searchQuery","currentPage","axios","get","then","data","hits","Spinner","color","height","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","handleOverlayClick","e","target","window","addEventListener","removeEventListener","back","forward","modalImage","largeImageURL","tags","createPortal","bodyRef","App","error","isLoading","modal","modalIndex","search","find","image","prevState","indexOf","onFetchImages","scrollTo","top","documentElement","scrollHeight","behavior","onChangeQuery","options","pixabayApi","catch","finally","modalImageBackHandler","modalImageForwardHandler","length","prevProps","classList","add","remove","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7e7bcf2e.chunk.js","sourcesContent":["import React from 'react';\n\nconst ImageGalleryItem = ({ url, alt, onModalToggle }) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={url}\n        width=\"640\"\n        alt={alt}\n        className=\"ImageGalleryItem-image\"\n        onClick={onModalToggle}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nclass ImageGallery extends Component {\n  render() {\n    const { images, onModalToggle } = this.props;\n    return (\n      <ul className=\"ImageGallery\">\n        {images.map(({ id, webformatURL, tag }) => (\n          <ImageGalleryItem\n            key={id}\n            url={webformatURL}\n            alt={tag}\n            onModalToggle={() => onModalToggle(id)}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  changeHandler = event => {\n    this.setState({\n      query: event.currentTarget.value,\n    });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n    // console.log(this.state);\n    this.props.onSubmit(this.state.query);\n\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    const { query } = this.state;\n    // const { onSubmit } = this.props;\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.changeHandler}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\n// import Spinner from '../Loader';\n\nconst Button = ({ fetchImages }) => {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={fetchImages}>\n      {/* {isLoading && <Spinner />} */}\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n","// import React from 'react';\nimport axios from 'axios';\n\nasync function fetchImages({ searchQuery = '', currentPage = 1 }) {\n  const apiKey = '20410166-62a7784bd988192fa85965390';\n  const url = `https://pixabay.com/api/?q=${searchQuery}&page=${currentPage}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n  return await axios.get(url).then(({ data }) => data.hits);\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { fetchImages };\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Spinner = () => {\n  return (\n    <Loader\n      className=\"Loader\"\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={60}\n      width={60}\n    />\n  );\n};\n\nexport default Spinner;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.toggleModal();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.target !== e.currentTarget) {\n      return;\n    } else this.props.toggleModal();\n  };\n\n  render() {\n    const { back, forward } = this.props;\n    const { largeImageURL, tags } = this.props.modalImage;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          <button\n            type=\"button\"\n            className=\"ModalButtonBack\"\n            onClick={() => back()}\n          >\n            {'<'}\n          </button>\n          <img src={largeImageURL} alt={tags} />\n          <button\n            type=\"button\"\n            className=\"ModalButtonForward\"\n            onClick={() => forward()}\n          >\n            {'>'}\n          </button>\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport './App.css';\nimport ImageGallery from './Components/ImageGallery';\nimport Searchbar from './Components/Searchbar';\nimport Button from './Components/Button';\nimport pixabayApi from './Components/Service';\nimport Loader from './Components/Loader';\nimport Modal from './Components/Modal';\n\nconst bodyRef = document.querySelector('body');\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    error: null,\n    isLoading: false,\n    modal: false,\n    modalIndex: '',\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n    if (prevState.images.length > 12) {\n      this.onFetchImages();\n    }\n  }\n\n  toggleModal = id => {\n    const { images } = this.state;\n    const search = images.find(image => image.id === id);\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      modalIndex: images.indexOf(search),\n    }));\n  };\n\n  onFetchImages = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  onChangeQuery = query => {\n    this.setState({ searchQuery: query, images: [], currentPage: 1 });\n  };\n\n  fetchImages = () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { currentPage, searchQuery };\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchImages(options)\n      .then(hits => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          currentPage: prevState.currentPage + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  modalImageBackHandler = () => {\n    if (this.state.modalIndex === 0) {\n      this.toggleModal();\n    }\n    this.setState(prevState => ({\n      modalIndex: prevState.modalIndex - 1,\n    }));\n  };\n\n  modalImageForwardHandler = () => {\n    const { images, modalIndex } = this.state;\n    if (modalIndex >= images.length - 2) {\n      this.fetchImages();\n    }\n    this.setState(prevState => ({\n      modalIndex: prevState.modalIndex + 1,\n    }));\n  };\n\n  render() {\n    const { modal, modalIndex, images, isLoading } = this.state;\n\n    return (\n      <div>\n        {modal\n          ? bodyRef.classList.add('modal-open')\n          : bodyRef.classList.remove('modal-open')}\n        <Searchbar onSubmit={this.onChangeQuery} />\n        <ImageGallery images={images} onModalToggle={this.toggleModal} />\n        {isLoading && <Loader />}\n        {images.length > 0 && !isLoading && (\n          <Button fetchImages={this.fetchImages} />\n        )}\n        {modal && (\n          <Modal\n            toggleModal={this.toggleModal}\n            modalImage={images[modalIndex]}\n            back={this.modalImageBackHandler}\n            forward={this.modalImageForwardHandler}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}